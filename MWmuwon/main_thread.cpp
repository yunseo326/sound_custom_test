#include "include/CalDegree.hpp"
#include <iostream>
#include <algorithm>
#include <portaudio.h>
#include <cmath>
#include <vector>

#include <thread>
#include <chrono>

using namespace CalDegree;
#define SAMPLE_RATE 44100
#define FRAMES_PER_BUFFER 44100*2
#define THRESHOLD 0.03
#define DEVICE_ID1 6
#define DEVICE_ID2 7
#define DEVICE_ID3 8
#define DEVICE_ID4 9

float inputData1[FRAMES_PER_BUFFER];
float inputData2[FRAMES_PER_BUFFER];
float inputData3[FRAMES_PER_BUFFER];
float inputData4[FRAMES_PER_BUFFER];

float savedata1[FRAMES_PER_BUFFER];
float savedata2[FRAMES_PER_BUFFER];
float savedata3[FRAMES_PER_BUFFER];
float savedata4[FRAMES_PER_BUFFER];

#include <matplotlibcpp.h>
namespace plt = matplotlibcpp;





static int audioCallback1(const void *inputBuffer, void *outputBuffer,
    unsigned long framesPerBuffer,
    const PaStreamCallbackTimeInfo *timeInfo,
    PaStreamCallbackFlags statusFlags,
    void *userData) {
        cout << 1.1 << endl;
        float *inBuffer = (float *)inputBuffer;
        cout << 1.2 << endl;
// Ï≤´ Î≤àÏß∏ ÏûÖÎ†• (ÎßàÏù¥ÌÅ¨ 1)
for (unsigned long i = 0; i < framesPerBuffer; ++i) {
inputData1[i] = inBuffer[i];  // Ï≤´ Î≤àÏß∏ Ï±ÑÎÑê
}
cout << 1.3 << endl;

return paContinue;
}

static int audioCallback2(const void *inputBuffer, void *outputBuffer,
    unsigned long framesPerBuffer,
    const PaStreamCallbackTimeInfo *timeInfo,
    PaStreamCallbackFlags statusFlags,
    void *userData) {
        cout << 2.1 << endl;
        float *inBuffer = (float *)inputBuffer;
        cout << 2.2 << endl;
        // Îëê Î≤àÏß∏ ÏûÖÎ†• (ÎßàÏù¥ÌÅ¨ 2)
        for (unsigned long i = 0; i < framesPerBuffer; ++i) {
        inputData2[i] = inBuffer[i];  // Îëê Î≤àÏß∏ Ï±ÑÎÑê
        }
        cout << 2.3 << endl;

        return paContinue;
    }

static int audioCallback3(const void *inputBuffer, void *outputBuffer,
    unsigned long framesPerBuffer,
    const PaStreamCallbackTimeInfo *timeInfo,
    PaStreamCallbackFlags statusFlags,
    void *userData) {
        cout << 3.1 << endl;
        float *inBuffer = (float *)inputBuffer;
        cout << 3.2 << endl;
        // ÏÑ∏ Î≤àÏß∏ ÏûÖÎ†• (ÎßàÏù¥ÌÅ¨ 3)
        for (unsigned long i = 0; i < framesPerBuffer; ++i) {
        inputData3[i] = inBuffer[i];  // ÏÑ∏ Î≤àÏß∏ Ï±ÑÎÑê
    }
    cout << 3.3 << endl;


return paContinue;
}

static int audioCallback4(const void *inputBuffer, void *outputBuffer,
    unsigned long framesPerBuffer,
    const PaStreamCallbackTimeInfo *timeInfo,
    PaStreamCallbackFlags statusFlags,
    void *userData) {
        cout << 4.1 << endl;
        float *inBuffer = (float *)inputBuffer;
        cout << 4.2 << endl;
        // ÎÑ§ Î≤àÏß∏ ÏûÖÎ†• (ÎßàÏù¥ÌÅ¨ 4)
        for (unsigned long i = 0; i < framesPerBuffer; ++i) {
        inputData4[i] = inBuffer[i];  // ÎÑ§ Î≤àÏß∏ Ï±ÑÎÑê
    }
    cout << 4.3 << endl;


return paContinue;
}



// ÎÑ§ Í∞úÏùò Ïò§ÎîîÏò§ Ïû•ÏπòÏóê ÎåÄÌïú Ïä§Ìä∏Î¶º ÏÑ§Ï†ï
PaStream *stream1, *stream2, *stream3, *stream4;
PaStreamParameters inputParameters1, inputParameters2, inputParameters3, inputParameters4;

// üéµ Ï≤´ Î≤àÏß∏ Ïò§ÎîîÏò§ ÏûÖÎ†•ÏùÑ ÏùΩÎäî Ìï®Ïàò (Ïä§Î†àÎìúÏóêÏÑú Ïã§Ìñâ)
void captureAudio1() {
    // cout << 1.1 << endl;

    float buffer[FRAMES_PER_BUFFER];
    // cout << 1.2 << endl;

    PaError err = Pa_ReadStream(stream1, buffer, FRAMES_PER_BUFFER);
    if (err != paNoError) {
        std::cerr << "Pa_ReadStream error: " << Pa_GetErrorText(err) << std::endl;
    }

    std::this_thread::sleep_for(std::chrono::milliseconds(100));
    // cout << 1.3 << endl;
    std::copy(buffer, buffer + FRAMES_PER_BUFFER, inputData1);

    // ÏùΩÏùÄ Îç∞Ïù¥ÌÑ∞Î•º Ï†ÄÏû• (Ï≤´ Î≤àÏß∏ Î≤ÑÌçºÏóê)
    // inputData1.insert(audioBuffer1.end(), buffer, buffer + FRAMES_PER_BUFFER);
    }

// üéµ Îëê Î≤àÏß∏ Ïò§ÎîîÏò§ ÏûÖÎ†•ÏùÑ ÏùΩÎäî Ìï®Ïàò (Ïä§Î†àÎìúÏóêÏÑú Ïã§Ìñâ)
void captureAudio2() {
    // cout << 2.1 << endl;
    float buffer[FRAMES_PER_BUFFER];
    // cout << 2.2 << endl;

    PaError err = Pa_ReadStream(stream2, buffer, FRAMES_PER_BUFFER);
    if (err != paNoError) {
        std::cerr << "Pa_ReadStream error: " << Pa_GetErrorText(err) << std::endl;
    }
    std::this_thread::sleep_for(std::chrono::milliseconds(100));

    // cout << 2.3 << endl;

    // ÏùΩÏùÄ Îç∞Ïù¥ÌÑ∞Î•º Ï†ÄÏû• (Îëê Î≤àÏß∏ Î≤ÑÌçºÏóê)
    std::copy(buffer, buffer + FRAMES_PER_BUFFER, inputData2);
    }

// üéµ ÏÑ∏ Î≤àÏß∏ Ïò§ÎîîÏò§ ÏûÖÎ†•ÏùÑ ÏùΩÎäî Ìï®Ïàò (Ïä§Î†àÎìúÏóêÏÑú Ïã§Ìñâ)
void captureAudio3() {
    // cout << 3.1 << endl;

    float buffer[FRAMES_PER_BUFFER];
    // cout << 3.2 << endl;

    PaError err = Pa_ReadStream(stream3, buffer, FRAMES_PER_BUFFER);
    if (err != paNoError) {
        std::cerr << "Pa_ReadStream error: " << Pa_GetErrorText(err) << std::endl;
    }
    std::this_thread::sleep_for(std::chrono::milliseconds(100));

    // cout << 3.3 << endl;

    // ÏùΩÏùÄ Îç∞Ïù¥ÌÑ∞Î•º Ï†ÄÏû• (ÏÑ∏ Î≤àÏß∏ Î≤ÑÌçºÏóê)
    std::copy(buffer, buffer + FRAMES_PER_BUFFER, inputData3);
    }

// üéµ ÎÑ§ Î≤àÏß∏ Ïò§ÎîîÏò§ ÏûÖÎ†•ÏùÑ ÏùΩÎäî Ìï®Ïàò (Ïä§Î†àÎìúÏóêÏÑú Ïã§Ìñâ)
void captureAudio4() {
    // cout << 4.1 << endl;
    float buffer[FRAMES_PER_BUFFER];
    // cout << 4.2 << endl;

    PaError err = Pa_ReadStream(stream4, buffer, FRAMES_PER_BUFFER);
    if (err != paNoError) {
        std::cerr << "Pa_ReadStream error: " << Pa_GetErrorText(err) << std::endl;
    }
    std::this_thread::sleep_for(std::chrono::milliseconds(100));

    // cout << 4.3 << endl;

    // ÏùΩÏùÄ Îç∞Ïù¥ÌÑ∞Î•º Ï†ÄÏû• (ÎÑ§ Î≤àÏß∏ Î≤ÑÌçºÏóê)
    std::copy(buffer, buffer + FRAMES_PER_BUFFER, inputData4);
    }

int main(){
    int EN = 0;

    PaError err = Pa_Initialize();
    if (err != paNoError) {
        std::cerr << "PortAudio Ï¥àÍ∏∞Ìôî Ïã§Ìå®: " << Pa_GetErrorText(err) << std::endl;
        return -1;
    }
    
    // Ï≤´ Î≤àÏß∏ Ïò§ÎîîÏò§ Ïû•Ïπò ÏÑ§Ï†ï (ÎßàÏù¥ÌÅ¨ 1)
    inputParameters1.device = DEVICE_ID1;  // Ï≤´ Î≤àÏß∏ USB ÎßàÏù¥ÌÅ¨Ïùò device ID
    inputParameters1.channelCount = 1;
    inputParameters1.sampleFormat = paFloat32;
    inputParameters1.suggestedLatency = Pa_GetDeviceInfo(inputParameters1.device)->defaultLowInputLatency;
    inputParameters1.hostApiSpecificStreamInfo = nullptr;

    // Îëê Î≤àÏß∏ Ïò§ÎîîÏò§ Ïû•Ïπò ÏÑ§Ï†ï (ÎßàÏù¥ÌÅ¨ 2)
    inputParameters2.device = DEVICE_ID2;  // Îëê Î≤àÏß∏ USB ÎßàÏù¥ÌÅ¨Ïùò device ID
    inputParameters2.channelCount = 1;
    inputParameters2.sampleFormat = paFloat32;
    inputParameters2.suggestedLatency = Pa_GetDeviceInfo(inputParameters2.device)->defaultLowInputLatency;
    inputParameters2.hostApiSpecificStreamInfo = nullptr;

    // ÏÑ∏ Î≤àÏß∏ Ïò§ÎîîÏò§ Ïû•Ïπò ÏÑ§Ï†ï (ÎßàÏù¥ÌÅ¨ 3)
    inputParameters3.device = DEVICE_ID3;  // ÏÑ∏ Î≤àÏß∏ USB ÎßàÏù¥ÌÅ¨Ïùò device ID
    inputParameters3.channelCount = 1;
    inputParameters3.sampleFormat = paFloat32;
    inputParameters3.suggestedLatency = Pa_GetDeviceInfo(inputParameters3.device)->defaultLowInputLatency;
    inputParameters3.hostApiSpecificStreamInfo = nullptr;

    // ÎÑ§ Î≤àÏß∏ Ïò§ÎîîÏò§ Ïû•Ïπò ÏÑ§Ï†ï (ÎßàÏù¥ÌÅ¨ 4)
    inputParameters4.device = DEVICE_ID4;  // ÎÑ§ Î≤àÏß∏ USB ÎßàÏù¥ÌÅ¨Ïùò device ID
    inputParameters4.channelCount = 1;
    inputParameters4.sampleFormat = paFloat32;
    inputParameters4.suggestedLatency = Pa_GetDeviceInfo(inputParameters4.device)->defaultLowInputLatency;
    inputParameters4.hostApiSpecificStreamInfo = nullptr;


    // Ï≤´ Î≤àÏß∏ Ïä§Ìä∏Î¶º Ïó¥Í∏∞ (ÎßàÏù¥ÌÅ¨ 1)
    err = Pa_OpenStream(&stream1,
                        &inputParameters1, nullptr, SAMPLE_RATE, FRAMES_PER_BUFFER,
                        paClipOff, nullptr, nullptr);
    if (err != paNoError) {
        std::cerr << "Ï≤´ Î≤àÏß∏ Ïä§Ìä∏Î¶º Ïó¥Í∏∞ Ïã§Ìå®: " << Pa_GetErrorText(err) << std::endl;
        return -1;
    }

    // Îëê Î≤àÏß∏ Ïä§Ìä∏Î¶º Ïó¥Í∏∞ (ÎßàÏù¥ÌÅ¨ 2)
    err = Pa_OpenStream(&stream2,
                        &inputParameters2, nullptr, SAMPLE_RATE, FRAMES_PER_BUFFER,
                        paClipOff, nullptr, nullptr);
    if (err != paNoError) {
        std::cerr << "Îëê Î≤àÏß∏ Ïä§Ìä∏Î¶º Ïó¥Í∏∞ Ïã§Ìå®: " << Pa_GetErrorText(err) << std::endl;
        return -1;
    }

    // ÏÑ∏ Î≤àÏß∏ Ïä§Ìä∏Î¶º Ïó¥Í∏∞ (ÎßàÏù¥ÌÅ¨ 3)
    err = Pa_OpenStream(&stream3,
                        &inputParameters3, nullptr, SAMPLE_RATE, FRAMES_PER_BUFFER,
                        paClipOff, nullptr, nullptr);
    if (err != paNoError) {
        std::cerr << "ÏÑ∏ Î≤àÏß∏ Ïä§Ìä∏Î¶º Ïó¥Í∏∞ Ïã§Ìå®: " << Pa_GetErrorText(err) << std::endl;
        return -1;
    }

    // ÎÑ§ Î≤àÏß∏ Ïä§Ìä∏Î¶º Ïó¥Í∏∞ (ÎßàÏù¥ÌÅ¨ 4)
    err = Pa_OpenStream(&stream4,
                        &inputParameters4, nullptr, SAMPLE_RATE, FRAMES_PER_BUFFER,
                        paClipOff, nullptr, nullptr);
    if (err != paNoError) {
        std::cerr << "ÎÑ§ Î≤àÏß∏ Ïä§Ìä∏Î¶º Ïó¥Í∏∞ Ïã§Ìå®: " << Pa_GetErrorText(err) << std::endl;
        return -1;
    }
    // Ïä§Ìä∏Î¶º ÏãúÏûë (ÎßàÏù¥ÌÅ¨ 1, ÎßàÏù¥ÌÅ¨ 2, ÎßàÏù¥ÌÅ¨ 3, ÎßàÏù¥ÌÅ¨ 4)
    err = Pa_StartStream(stream1);
    if (err != paNoError) {
        std::cerr << "Ï≤´ Î≤àÏß∏ Ïä§Ìä∏Î¶º ÏãúÏûë Ïã§Ìå®: " << Pa_GetErrorText(err) << std::endl;
        return -1;
    }

    err = Pa_StartStream(stream2);
    if (err != paNoError) {
        std::cerr << "Îëê Î≤àÏß∏ Ïä§Ìä∏Î¶º ÏãúÏûë Ïã§Ìå®: " << Pa_GetErrorText(err) << std::endl;
        return -1;
    }

    err = Pa_StartStream(stream3);
    if (err != paNoError) {
        std::cerr << "ÏÑ∏ Î≤àÏß∏ Ïä§Ìä∏Î¶º ÏãúÏûë Ïã§Ìå®: " << Pa_GetErrorText(err) << std::endl;
        return -1;
    }

    err = Pa_StartStream(stream4);
    if (err != paNoError) {
        std::cerr << "ÎÑ§ Î≤àÏß∏ Ïä§Ìä∏Î¶º ÏãúÏûë Ïã§Ìå®: " << Pa_GetErrorText(err) << std::endl;
        return -1;
    }

    std::cout << "Ïò§ÎîîÏò§ ÏûÖÎ†•ÏùÑ ÏãúÏûëÌï©ÎãàÎã§. Ï¢ÖÎ£åÌïòÎ†§Î©¥ Ctrl+CÎ•º ÎàÑÎ•¥ÏÑ∏Ïöî..." << std::endl;
    // plt::ion();  // Ïù∏ÌÑ∞ÎûôÌã∞Î∏å Î™®Îìú ÌôúÏÑ±Ìôî

    while (true) {

        // üéØ Ï≤´ Î≤àÏß∏ Ïò§ÎîîÏò§ ÏûÖÎ†•ÏùÑ Î∞õÏùÑ Ïä§Î†àÎìú Ïã§Ìñâ
        std::thread captureThread1(captureAudio1);

        // üéØ Îëê Î≤àÏß∏ Ïò§ÎîîÏò§ ÏûÖÎ†•ÏùÑ Î∞õÏùÑ Ïä§Î†àÎìú Ïã§Ìñâ
        std::thread captureThread2(captureAudio2);

        // üéØ ÏÑ∏ Î≤àÏß∏ Ïò§ÎîîÏò§ ÏûÖÎ†•ÏùÑ Î∞õÏùÑ Ïä§Î†àÎìú Ïã§Ìñâ
        std::thread captureThread3(captureAudio3);

        // üéØ ÎÑ§ Î≤àÏß∏ Ïò§ÎîîÏò§ ÏûÖÎ†•ÏùÑ Î∞õÏùÑ Ïä§Î†àÎìú Ïã§Ìñâ
        std::thread captureThread4(captureAudio4);

        captureThread1.join();
        captureThread2.join();
        captureThread3.join();
        captureThread4.join();
        /*
        plt::clf();  // Í∑∏ÎûòÌîÑ Ï¥àÍ∏∞Ìôî

        // Ï≤´ Î≤àÏß∏ ÎßàÏù¥ÌÅ¨Ïùò Ïò§ÎîîÏò§ Îç∞Ïù¥ÌÑ∞Î•º Í∑∏ÎûòÌîÑÏóê Í∑∏Î¶¨Í∏∞
        plt::subplot(4, 1, 1);
        plt::plot(std::vector<float>(inputData1, inputData1 + FRAMES_PER_BUFFER));
        plt::title("Input 1");
        
        plt::xlim(0, FRAMES_PER_BUFFER);   // xÏ∂ï Î≤îÏúÑ ÏÑ§Ï†ï
        plt::ylim(-0.5, 0.5);              // yÏ∂ï Î≤îÏúÑ ÏÑ§Ï†ï

        // Îëê Î≤àÏß∏ ÎßàÏù¥ÌÅ¨Ïùò Ïò§ÎîîÏò§ Îç∞Ïù¥ÌÑ∞Î•º Í∑∏ÎûòÌîÑÏóê Í∑∏Î¶¨Í∏∞
        plt::subplot(4, 1, 2);
        plt::plot(std::vector<float>(inputData2, inputData2 + FRAMES_PER_BUFFER));
        plt::title("Input 2");
        
        plt::xlim(0, FRAMES_PER_BUFFER);   // xÏ∂ï Î≤îÏúÑ ÏÑ§Ï†ï
        plt::ylim(-0.5, 0.5);              // yÏ∂ï Î≤îÏúÑ ÏÑ§Ï†ï

        // ÏÑ∏ Î≤àÏß∏ ÎßàÏù¥ÌÅ¨Ïùò Ïò§ÎîîÏò§ Îç∞Ïù¥ÌÑ∞Î•º Í∑∏ÎûòÌîÑÏóê Í∑∏Î¶¨Í∏∞
        plt::subplot(4, 1, 3);
        plt::plot(std::vector<float>(inputData3, inputData3 + FRAMES_PER_BUFFER));
        plt::title("Input 3");
        
        plt::xlim(0, FRAMES_PER_BUFFER);   // xÏ∂ï Î≤îÏúÑ ÏÑ§Ï†ï
        plt::ylim(-0.5, 0.5);              // yÏ∂ï Î≤îÏúÑ ÏÑ§Ï†ï

        // ÎÑ§ Î≤àÏß∏ ÎßàÏù¥ÌÅ¨Ïùò Ïò§ÎîîÏò§ Îç∞Ïù¥ÌÑ∞Î•º Í∑∏ÎûòÌîÑÏóê Í∑∏Î¶¨Í∏∞
        plt::subplot(4, 1, 4);
        plt::plot(std::vector<float>(inputData4, inputData4 + FRAMES_PER_BUFFER));
        plt::title("Input 4");
        
        plt::xlim(0, FRAMES_PER_BUFFER);   // xÏ∂ï Î≤îÏúÑ ÏÑ§Ï†ï
        plt::ylim(-0.5, 0.5);              // yÏ∂ï Î≤îÏúÑ ÏÑ§Ï†ï
        */

        
        
        // Copy the live input data into savedata arrays.
        std::copy(inputData1, inputData1 + FRAMES_PER_BUFFER, savedata1);
        std::copy(inputData2, inputData2 + FRAMES_PER_BUFFER, savedata2);
        std::copy(inputData3, inputData3 + FRAMES_PER_BUFFER, savedata3);
        std::copy(inputData4, inputData4 + FRAMES_PER_BUFFER, savedata4);

        float* maxPtr1 = std::max_element(savedata1, savedata1+FRAMES_PER_BUFFER);
        float* maxPtr2 = std::max_element(savedata2, savedata2+FRAMES_PER_BUFFER);
        float* maxPtr3 = std::max_element(savedata3, savedata3+FRAMES_PER_BUFFER);
        float* maxPtr4 = std::max_element(savedata4, savedata4+FRAMES_PER_BUFFER);

        if (*maxPtr1 >= THRESHOLD && *maxPtr2 >= THRESHOLD && *maxPtr3 >= THRESHOLD && *maxPtr4 >= THRESHOLD){
            // EN = EN + 1;
            // if (EN == 100){
                int maxIndex1 = std::distance(savedata1, maxPtr1);        
                int maxIndex2 = std::distance(savedata2, maxPtr2);
                int maxIndex3 = std::distance(savedata3, maxPtr3);
                int maxIndex4 = std::distance(savedata4, maxPtr4);
                cout <<"maxindex: "<< maxIndex1 - maxIndex2 << " " << maxIndex2 - maxIndex3 << " " << maxIndex3 - maxIndex4 << " " << maxIndex4 - maxIndex1 << endl;
                
                std::vector<double> vecinput1(savedata1, savedata1 + FRAMES_PER_BUFFER);
                std::vector<double> vecinput2(savedata2, savedata2 + FRAMES_PER_BUFFER);
                std::vector<double> vecinput3(savedata3, savedata3 + FRAMES_PER_BUFFER);
                std::vector<double> vecinput4(savedata4, savedata4 + FRAMES_PER_BUFFER);
                    
                AudioResult result = getAudioAngle(vecinput1, vecinput2, vecinput3, vecinput4);

                cout << "Í≥ÑÏÇ∞Îêú ÏÇ¨Î∂ÑÎ©¥: " << result.direction << endl;
                cout << " 1Î≤àÏß∏ Î∞©Ìñ•: " << result.angle_1  << " ÎèÑ " << endl;
                cout << " 2Î≤àÏß∏ Î∞©Ìñ•: " << result.angle_2  << " ÎèÑ " << endl;
                cout << " 3Î≤àÏß∏ Î∞©Ìñ•: " << result.angle_3  << " ÎèÑ " << endl;
                cout << " 4Î≤àÏß∏ Î∞©Ìñ•: " << result.angle_4  << " ÎèÑ" << endl;
                cout << "ÏµúÏ¢Ö Î∞©Ìñ•: " << (result.angle_1 + result.angle_2 + result.angle_3 + result.angle_4) / 4.0 << " ÎèÑ" << endl;
                cout << endl;
            
        }
        else {
            EN = 0;
        }
        // plt::pause(0.01);  // Ïû†Ïãú ÎåÄÍ∏∞ (Í∑∏ÎûòÌîÑ Í∞±Ïã†ÏùÑ ÏúÑÌïú ÏãúÍ∞Ñ Ï°∞Ï†ï)
        std::this_thread::sleep_for(std::chrono::milliseconds(100));
    }
    // Ïä§Ìä∏Î¶º Ï¢ÖÎ£å
    err = Pa_StopStream(stream1);
    if (err != paNoError) {
        std::cerr << "Ï≤´ Î≤àÏß∏ Ïä§Ìä∏Î¶º Ï§ëÏßÄ Ïã§Ìå®: " << Pa_GetErrorText(err) << std::endl;
    }

    err = Pa_StopStream(stream2);
    if (err != paNoError) {
        std::cerr << "Îëê Î≤àÏß∏ Ïä§Ìä∏Î¶º Ï§ëÏßÄ Ïã§Ìå®: " << Pa_GetErrorText(err) << std::endl;
    }

    err = Pa_StopStream(stream3);
    if (err != paNoError) {
        std::cerr << "ÏÑ∏ Î≤àÏß∏ Ïä§Ìä∏Î¶º Ï§ëÏßÄ Ïã§Ìå®: " << Pa_GetErrorText(err) << std::endl;
    }

    err = Pa_StopStream(stream4);
    if (err != paNoError) {
        std::cerr << "ÎÑ§ Î≤àÏß∏ Ïä§Ìä∏Î¶º Ï§ëÏßÄ Ïã§Ìå®: " << Pa_GetErrorText(err) << std::endl;
    }

    Pa_Terminate();
return 0;
}
